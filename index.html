<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Supabase Connection Test</title>
  </head>
  <body style="font-family:system-ui;max-width:700px;margin:24px auto">
    <h2>Supabase Connection Test</h2>
    <pre id="out">Running…</pre>

    <script type="module">
      import { createClient } from "https://esm.sh/@supabase/supabase-js@2";

      const supabaseUrl = "https://fddmxlugqtikhbovomyo.supabase.co";
      const supabaseAnonKey = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZkZG14bHVncXRpa2hib3ZvbXlvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTU0OTM5NjMsImV4cCI6MjA3MTA2OTk2M30.zebrZJ8F30QLvn0a7IARKz5LxgOXyNs5mvPUSegeTxA";

      const supabase = createClient(supabaseUrl, supabaseAnonKey);

      const out = (x) => document.getElementById("out").textContent = x;

      try {
        const { data: branches, error } = await supabase
          .from("branches")
          .select("code,display_name,is_active")
          .order("display_name");

        if (error) throw error;
        out("✅ Connected!\n\nBranches:\n" + JSON.stringify(branches, null, 2));
      } catch (e) {
        out("❌ Error:\n" + (e.message || e));
      }
    </script>
  </body>
</html>
